<! DOCTYPE html><html><head><title>Phasor</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"><style>	.margin	{		margin-left:2.5em;		margin-right:2.5em;		margin-top:1em;		margin-bottom:1em;	}</style></head><body class="margin"><h1>Phasor</h1><hr/><p>In the context of computer music, a <i>phasor</i> means a signal that goes in a linear ramp from 0 to 1 repeatedly at a given frequency, completing a certain number of ramps per second. It can be used to read over-and-over through a lookup table (an array) containing some stored shape, generating a cyclical repeating pattern. That array might contain samples of an actual recorded sound&mdash;a sound clip&mdash;and the phasor would be used to read through it, thus playing a repeating loop. Or the array might contain the shape of a single cycle of a sound wave, and the phasor would read through it at an audible rate to create a cyclical tone.</p><p>Before giving examples of its usage, let's spend a minute understanding how to make such a ramp from 0 to 1, given a particular sample rate and a given frequency. The first output sample will be 0, and for each subsequent sample we will increment the value by the frequency <i>f</i> over the sample rate <i>R</i>. And if the result equals or exceeds 1, we throw away the integer part and keep the fractional part, thus ensuring that the phasor value always stays between 0 and (just less than) 1.</p><p>For example, if the sample rate is 44,100 Hz, and the frequency of the phasor is 1 Hz, each output sample would increase by 1/44100 (0.00002267574), so that after 44,100 such increments we will have completed the ramp from 0 to 1 (which will then wrap around to 0). If the frequency of the phasor were 440 Hz, we would increment by 440/44100 (0.00997732426), which would result in completing exactly 440 ramps from 0 to 1 per second.</p><p class="center"><img src="./10msof440Hzphasor.png" width=450 height=157 border=0/><br/><i>Graph of 10 ms (441 samples) of a 440 Hz phasor with a sample rate of 44,100 Hz</i></p><p>Here's some example code to demonstrate this phasor algorithm.</p><p><pre>var samplerate = 44100.; // samples per secondvar frequency = 1.; // ramps per second, from 0 to 1var increment = frequency / samplerate; // how much to increase the phasevar phase = 0.; // the current value of the phasorfunction phasor( arrayofsamples ) { // array passed in a callback	for ( let n = 0; n < arrayofsamples.length; n++ ) {	// for as many samples as we need to provide		arrayofsamples[n] = phase;		phase += increment; // calculate the next phase value		if ( phase >= 1. || phase < 0.) {			phase -= Math.floor( phase ); // keep it between 0 and 1		}	}	return;}</pre></p><p>In Max (and Pd) there's an object called <b>phasor~</b> that performs this function. In <b>gen~</b> there is an object called <b>phasor</b> that does the same.</p><hr width=50%/><p>This page is by <a href=http://music.arts.uci.edu/dobrian/>Christopher Dobrian</a>, <a href="mailto:dobrian@uci.edu"><i>dobrian@uci.edu</i></a>.<br/>Last modified March 31, 2019.</p></body></html>